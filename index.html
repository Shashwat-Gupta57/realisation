<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>A Letter to You</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Lora:ital,wght@0,500;1,400;1,500&family=Nunito:wght@400;600;700&display=swap" rel="stylesheet">
    <script>
      tailwind.config = {
        theme: {
          extend: {
            fontFamily: {
              serif: ['Lora', 'serif'],
              sans: ['Nunito', 'sans-serif'],
            },
            colors: {
              paper: '#FFFBF7',       // Warm Milk / Cream
              'paper-deep': '#FFF0F0', // Soft Blush/Rose
              ink: '#5C4B45',         // Warm Coffee Brown
              'ink-light': '#9C8E89', // Muted Taupe
              accent: '#E6A6A6',      // Dusty Pink
              'accent-hover': '#D49292',
              'thought-bg': '#FFFAFA',
            },
            boxShadow: {
              'soft': '0 4px 20px -2px rgba(92, 75, 69, 0.05)',
              'blush': '0 4px 20px -2px rgba(230, 166, 166, 0.3)',
              'blush-hover': '0 10px 25px -3px rgba(230, 166, 166, 0.45)',
            },
            animation: {
              'fade-in-up': 'fadeInUp 1.4s cubic-bezier(0.2, 0.8, 0.2, 1) forwards',
              'fade-in': 'fadeIn 2s ease-out forwards',
            },
            keyframes: {
              fadeInUp: {
                '0%': { opacity: '0', transform: 'translateY(20px)' },
                '100%': { opacity: '1', transform: 'translateY(0)' },
              },
              fadeIn: {
                '0%': { opacity: '0' },
                '100%': { opacity: '1' },
              }
            }
          }
        }
      }
    </script>
    <style>
      body {
        background-color: #FFFBF7;
        color: #5C4B45;
        transition: background-color 2s ease-in-out;
      }
      
      /* Hide scrollbar */
      ::-webkit-scrollbar {
        width: 0px;
        background: transparent;
      }
      
      .view-section {
        display: none;
        opacity: 0;
        transition: opacity 1.2s ease-in-out;
      }
      
      .view-section.active {
        display: flex;
        opacity: 1;
      }

      /* Pill Buttons - The core interaction element */
      .btn-pill {
        transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        border: 1px solid #F2E2E2;
        color: #9C8E89;
        background: white;
        border-radius: 9999px;
      }
      .btn-pill:hover {
        border-color: #E6A6A6;
        color: #5C4B45;
        transform: translateY(-2px);
        box-shadow: 0 10px 25px -3px rgba(230, 166, 166, 0.3);
      }
      
      .btn-link {
        color: #9C8E89;
        transition: color 0.3s ease;
        border-bottom: 1px solid transparent;
      }
      .btn-link:hover {
        color: #E6A6A6;
        border-color: #E6A6A6;
      }

      .reading-container {
        max-width: 34rem; /* Narrow for intimacy */
        margin: 0 auto;
      }
      
      .bubble-thought {
        background-color: #FFFAFA;
        border: 1px solid rgba(230, 166, 166, 0.3);
      }
    </style>
  </head>
  <body class="antialiased selection:bg-accent/20 selection:text-ink font-sans">

    <!-- PROGRESS BAR -->
    <div id="progress-container" class="fixed top-0 left-0 w-full h-1 z-50 opacity-0 transition-opacity duration-1000">
      <div id="progress-bar" class="h-full bg-accent/60 transition-all duration-1000 ease-out" style="width: 0%"></div>
    </div>

    <main class="min-h-screen w-full relative overflow-hidden">

      <!-- VIEW 1: LANDING / INTRO -->
      <section id="view-intro" class="view-section active min-h-screen flex-col items-center justify-center px-6">
        <div class="reading-container w-full text-center space-y-10 animate-fade-in-up">
          
          <div class="space-y-5">
            <div class="w-12 h-12 mx-auto bg-accent/10 rounded-full flex items-center justify-center mb-6 animate-fade-in">
               <svg viewBox="0 0 24 24" fill="none" class="w-6 h-6 text-accent" stroke="currentColor" stroke-width="2">
                 <path stroke-linecap="round" stroke-linejoin="round" d="M16.862 4.487l1.687-1.688a1.875 1.875 0 112.652 2.652L6.832 19.82a4.5 4.5 0 01-1.897 1.13l-2.685.8.8-2.685a4.5 4.5 0 011.13-1.897L16.863 4.487zm0 0L19.5 7.125" />
               </svg>
            </div>
            <h1 class="font-serif text-3xl md:text-4xl text-ink leading-relaxed">Hey, just a small note.</h1>
          </div>

          <div class="space-y-6 text-ink-light text-lg leading-loose">
            <p>
              No pressure here. Really.
            </p>
            <p>
              I just wanted a quiet place to explain a few things I messed up, because you deserve to know what was actually going on in my head.
            </p>
            <p class="text-sm text-accent pt-2 opacity-80">
              (You can stop reading whenever you want.)
            </p>
          </div>

          <div class="pt-10">
            <button id="btn-start" class="btn-pill px-10 py-4 text-sm font-bold tracking-wide shadow-blush">
              Read when you're ready
            </button>
          </div>
        </div>
      </section>

      <!-- VIEW 2: STORY ENGINE -->
      <section id="view-story" class="view-section min-h-screen flex-col items-center pb-32 pt-24 px-6">
        <div class="reading-container w-full relative">
          
          <!-- Header -->
          <header id="act-header" class="text-center mb-16 transition-all duration-1000 transform translate-y-0 opacity-100">
            <p id="act-label" class="text-accent text-xs tracking-[0.25em] uppercase font-bold mb-3 opacity-60"></p>
            <h2 id="act-title" class="font-serif text-2xl md:text-3xl text-ink opacity-90"></h2>
          </header>

          <!-- Content Area -->
          <div id="story-content" class="space-y-12 min-h-[200px]">
            <!-- Content injected here -->
          </div>

          <!-- Controls -->
          <div class="mt-24 text-center space-y-6">
            <button id="btn-continue" class="btn-pill px-12 py-3 text-sm font-bold opacity-0 transition-opacity duration-1000">
              Continue
            </button>
            
            <div id="finish-container" class="hidden">
              <button id="btn-finish-story" class="btn-link text-sm pb-1 tracking-wide">
                Turn the page
              </button>
            </div>
          </div>

          <div id="scroll-anchor" class="h-8"></div>
        </div>
      </section>

      <!-- VIEW 3: ACCOUNTABILITY -->
      <section id="view-accountability" class="view-section min-h-screen flex-col items-center justify-center px-6 py-20">
        <div class="reading-container w-full space-y-12 text-center animate-fade-in-up">
          
          <header class="space-y-5">
            <h2 class="font-serif text-3xl text-ink">Things I missed</h2>
            <div class="w-8 h-1 bg-accent/30 rounded-full mx-auto"></div>
          </header>

          <div class="space-y-8 text-ink-light text-lg leading-loose">
            <p>
              Looking back, I realize how gentle you were with me.
            </p>
            <p>
              You watched random reels with me just to laugh. You stayed up late when you were tired. You listened to my corny jokes and never made me feel silly.
            </p>
            <p>
              You gave me so much warmth.
            </p>
            <div class="py-4">
              <p class="text-accent font-serif italic text-xl">
                I wish I had been softer with you.
              </p>
            </div>
            <p>
              I was so distracted by my own panic that I forgot to protect your peace. I took your kindness, but I didn't return it enough.
            </p>
            <p class="text-ink font-semibold opacity-80">
              I really am sorry for that.
            </p>
          </div>

          <div class="pt-12 border-t border-accent/10 w-4/5 mx-auto">
            <p class="text-ink-light text-sm mb-8 italic">How are you feeling?</p>
            <div class="flex flex-col gap-5 items-center">
              <button id="btn-choice-friend" class="btn-pill w-full max-w-xs py-4 text-sm font-bold shadow-blush">
                Leave Shashwat Forever
              </button>
              <button id="btn-choice-distance" class="text-ink-light hover:text-accent text-sm py-2 px-6 transition-colors font-medium">
                Kill Shashwat
              </button>
            </div>
          </div>

        </div>
      </section>

      <!-- VIEW 4: FINAL -->
      <section id="view-final" class="view-section min-h-screen flex-col items-center justify-center px-6">
        <div class="reading-container w-full text-center space-y-8 animate-fade-in-up">
          <div class="w-14 h-14 bg-white rounded-full flex items-center justify-center mx-auto shadow-blush mb-4">
             <span class="text-2xl pt-1">üçÅ</span>
          </div>
          <h2 id="final-title" class="font-serif text-3xl text-ink"></h2>
          <div class="w-12 h-px bg-accent/20 mx-auto"></div>
          <p id="final-message" class="text-ink-light text-lg leading-loose"></p>
        </div>
      </section>

    </main>

    <script>
      // --- CONTENT ---
      const acts = [
        {
          id: '1', label: 'Chapter 1', title: 'Safe Place',
          segments: [
            { type: 'text', text: "I wanted to start by saying... you really became my best friend. Talking to you was just easy." },
            { type: 'text', text: "It wasn't just routine; it was peace. It felt like home. I trusted you completely." },
            { type: 'text', text: "And that safety is why I feel so bad about messing it up." }
          ]
        },
        {
          id: '2', label: 'Chapter 2', title: 'Being Clumsy',
          segments: [
            { type: 'text', text: "The first time I hurt you, it was just... careless. Rishika asked if you bullied me." },
            { type: 'text', text: "I should have stood up for you. Instead, I made a dumb joke and said 'yes'. I didn't think about how that sounded." },
            { type: 'text', text: "It hurt your image, and it hurt your feelings. Seeing you cry because of my stupid joke... I hated that." },
            { type: 'text', text: "I was clumsy with your reputation, and I'm really sorry." }
          ]
        },
        {
          id: '3', label: 'Chapter 3', title: 'Getting Scared',
          segments: [
            { type: 'text', text: "As we got closer, I started caring a lot. Like, a lot. And honestly? I panicked." },
            { type: 'text', text: "I have this weird fear of loving people more than they love me. My brain tried to hit the brakes." },
            { type: 'thought', text: "Whoa, this is dangerous. Stop." },
            { type: 'text', text: "I confused that fear with 'liking' you romantically. I didn't know what I was doing, so I got scared." }
          ]
        },
        {
          id: '4', label: 'Chapter 4', title: 'Running Away',
          segments: [
            { type: 'text', text: "So, I tried to run away. When our friend liked you, I used it as an excuse to distance myself." },
            { type: 'text', text: "I didn't even ask you. I just pulled away because I didn't know how to handle my own head." },
            { type: 'text', text: "When I finally told you, I got defensive instead of kind. I said you might like me, which was just me projecting my mess onto you." },
            { type: 'text', text: "I asked for a break. I shut you out. That wasn't fair." }
          ]
        },
        {
          id: '5', label: 'Chapter 5', title: 'Seeing Clearly',
          segments: [
            { type: 'text', text: "In that quiet time, I realized... you never did anything wrong. You never liked me like that." },
            { type: 'text', text: "I was just confused and scared of being vulnerable. I acted weird because I was lost, not because of you." },
            { type: 'text', text: "I took a safe friendship and made it complicated because I was afraid." }
          ]
        },
        {
          id: '6', label: 'Chapter 6', title: 'I Am Sorry',
          segments: [
            { type: 'text', text: "I'm sorry. Really." },
            { type: 'text', text: "For the joke, for running away, and for making you cry. I messed up something special." },
            { type: 'text', text: "I own that completely." }
          ]
        },
        {
          id: '7', label: 'Chapter 7', title: 'Simple Truth',
          segments: [
            { type: 'text', text: "I value you. A lot. I wish I hadn't let my fear get in the way." },
            { type: 'text', text: "I'm not expecting anything. I just wanted to be honest with you." },
            { type: 'break', text: "..." }
          ]
        }
      ];

      // --- STATE & UI LOGIC ---
      const state = {
        actIndex: 0,
        segIndex: 0,
        view: 'view-intro'
      };

      const els = {
        body: document.body,
        progressBar: document.getElementById('progress-bar'),
        progressContainer: document.getElementById('progress-container'),
        // Views
        viewIntro: document.getElementById('view-intro'),
        viewStory: document.getElementById('view-story'),
        viewAccountability: document.getElementById('view-accountability'),
        viewFinal: document.getElementById('view-final'),
        // Story
        actLabel: document.getElementById('act-label'),
        actTitle: document.getElementById('act-title'),
        actHeader: document.getElementById('act-header'),
        storyContent: document.getElementById('story-content'),
        btnContinue: document.getElementById('btn-continue'),
        btnFinish: document.getElementById('btn-finish-story'),
        finishContainer: document.getElementById('finish-container'),
        scrollAnchor: document.getElementById('scroll-anchor'),
        // Final
        finalTitle: document.getElementById('final-title'),
        finalMessage: document.getElementById('final-message')
      };

      function setView(id) {
        // Fade out current view
        const curr = document.getElementById(state.view);
        curr.style.opacity = '0';
        
        setTimeout(() => {
          curr.classList.remove('active');
          curr.style.display = 'none';
          
          // Setup next view
          const next = document.getElementById(id);
          next.style.display = 'flex';
          state.view = id;
          
          void next.offsetWidth; // Force reflow
          next.classList.add('active');
          next.style.opacity = '1';
          
          // Theme shifts
          if (id === 'view-accountability') els.body.style.backgroundColor = '#FFF0F0';
          else els.body.style.backgroundColor = '#FFFBF7';

          if (id === 'view-story') {
            els.progressContainer.style.opacity = '1';
            loadAct();
          } else {
            els.progressContainer.style.opacity = '0';
          }
          
          window.scrollTo(0,0);
        }, 1200);
      }

      function loadAct() {
        const act = acts[state.actIndex];
        
        // Header Transition
        els.actHeader.style.opacity = '0';
        els.actHeader.style.transform = 'translateY(-5px)';
        
        setTimeout(() => {
          els.actLabel.innerText = act.label;
          els.actTitle.innerText = act.title;
          els.actHeader.style.opacity = '1';
          els.actHeader.style.transform = 'translateY(0)';
          
          if (state.segIndex === 0) els.storyContent.innerHTML = '';
          nextSegment();
        }, 800);
      }

      function createSeg(seg) {
        const div = document.createElement('div');
        div.className = "opacity-0 transform translate-y-4 transition-all duration-1000";
        
        if (seg.type === 'thought') {
          div.innerHTML = `
            <div class="flex justify-center my-10">
              <div class="bubble-thought px-8 py-6 rounded-3xl shadow-soft">
                <p class="font-serif italic text-accent text-center text-lg leading-relaxed">"${seg.text}"</p>
              </div>
            </div>`;
        } else if (seg.type === 'break') {
          div.innerHTML = `<div class="text-center text-accent/30 text-3xl py-6 tracking-widest">. . .</div>`;
        } else {
          div.innerHTML = `<p class="text-lg md:text-xl leading-loose text-ink-light text-center font-normal">${seg.text}</p>`;
        }
        return div;
      }

      function nextSegment() {
        const act = acts[state.actIndex];
        if (state.segIndex >= act.segments.length) return;

        const seg = act.segments[state.segIndex];
        const el = createSeg(seg);
        els.storyContent.appendChild(el);

        requestAnimationFrame(() => {
          requestAnimationFrame(() => {
            el.classList.remove('opacity-0', 'translate-y-4');
            el.classList.add('opacity-100', 'translate-y-0');
          });
        });

        state.segIndex++;
        updateUI();
        
        setTimeout(() => {
            els.scrollAnchor.scrollIntoView({ behavior: 'smooth', block: 'end' });
        }, 200);
      }

      function updateUI() {
        const act = acts[state.actIndex];
        const isActDone = state.segIndex >= act.segments.length;
        const isStoryDone = state.actIndex >= acts.length - 1;

        // Progress
        const total = acts.length;
        const pct = (state.actIndex / (total - 1)) * 100;
        els.progressBar.style.width = `${pct}%`;

        // Buttons
        if (isStoryDone && isActDone) {
          els.btnContinue.classList.add('hidden');
          els.finishContainer.classList.remove('hidden');
        } else {
          els.btnContinue.classList.remove('hidden');
          els.finishContainer.classList.add('hidden');
          els.btnContinue.style.opacity = '1';
          els.btnContinue.innerText = isActDone ? "Next Chapter" : "Continue";
        }
      }

      // Events
      document.getElementById('btn-start').onclick = () => setView('view-story');
      
      els.btnContinue.onclick = () => {
        const act = acts[state.actIndex];
        if (state.segIndex < act.segments.length) {
          nextSegment();
        } else {
          state.actIndex++;
          state.segIndex = 0;
          els.storyContent.style.opacity = '0';
          setTimeout(() => {
            els.storyContent.innerHTML = '';
            els.storyContent.style.opacity = '1';
            loadAct();
            window.scrollTo(0,0);
          }, 600);
        }
      };
      
      els.btnFinish.onclick = () => setView('view-accountability');
      
      document.getElementById('btn-choice-friend').onclick = () => {
        els.finalTitle.innerText = "Thank You, Great Choice";
        els.finalMessage.innerText = "Your Choice Is Absolutely Amazing like Always, A person like shashwat deserves to stay alone all his life, infact he doesn't even deserve to live anymore, but all thanks to your big heart and care.. he will continue to live. although what he did was absolutely unforgivable and i think that you are doing it wrong by not killing him or punishing him, he deserves it. But leaving him when he is attached to you is also angiod enough punishment you can give him, because how dare he hurt such a goog girl like you!";
        setView('view-final');
      };
      
      document.getElementById('btn-choice-distance').onclick = () => {
        els.finalTitle.innerText = "Amazing Choice!";
        els.finalMessage.innerText = "A person like shashwat deserves to be erased off the face of the earth, his actions were never right, he always jokes around like a fool. he never cared about anyone, and didn't even listened to music! can you believe that? he was just so stupid and dumb he could never undertand anyone in a single go anyways, he was just too bad to be allowed to live, come on.. i wonder who even let him live till now.. like he's bad as hell, doesn't even look good, nor has enough height or something, always does technical stuff and mean things, like bro... do u even think for once? like u do so much rude stuff and mean things all the time, like I am also fed up of him, how can someone be careless and reckless? and he called his bestfriend each time when he was having fun to cause her FOMO? come on, that's the most evil thing anyone can do! you should have left him way before only, why did you wait till now. infact he shall be hanged to death!";
        setView('view-final');
      };

    </script>
  </body>
</html>
